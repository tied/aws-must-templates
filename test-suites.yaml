# test-suites.yaml defining test suites for aws-must-templates
# 
# Defines an array of test suite definitions with attributes
# - desc: one liner summarizing the test suite
# - roles: (optional) an array of test specs in the directory `spec`
# - instance (optional): an array of EC2 instance test specifications, which should be tested
# 
# EC2 instance test specificiation:
# - roles: an array of test spect in the directory `spec`, which the EC2 instance should pass
#
# 

- smoke:
   desc: Fails fast if problems with AWS installation
   roles:
     - NoSuchTest
     - Stack
     - ParameterTest:
          param1: value1
          param2: "@Parameters.DummyParameter"
          param3: "@Outputs.Bucket"

- suite1:
   desc: EC2 instance with s3 access
   # roles:
   #   - Stack
   instances:
     - myInstance:
         roles:
           - Stack
           - AwsCommandLineInterfaceInstalled:
           - CloudFormationHelperScriptsInstalled
           - S3ReadAccessAllowed:
                Bucket: "@Outputs.Bucket"

     - myInstance2:
         roles:
          - ParameterTest:
              param1: value1
              param2: "value2"
              param3: "@Outputs.Bucket"
          - Stack
          - AwsCommandLineInterfaceInstalled
          - CloudFormationHelperScriptsInstalled
          - S3NoAccess:
              Bucket: "@Outputs.Bucket"
